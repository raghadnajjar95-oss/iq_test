<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>اختبار الذكاء</title>
  <style>
    body { font-family: Tahoma, sans-serif; text-align: center; background: #f5f5f5; direction: rtl; }
    #quiz { max-width: 700px; margin: 50px auto; padding: 20px; background: #fff; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);}
    h1 { color: #333; }
    .question { font-size: 20px; margin: 20px 0; }
    .options button { display: block; margin: 10px auto; padding: 10px; width: 80%; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; background: #eee; transition: 0.3s; }
    .options button:hover { background: #ddd; }
    #timer { font-size: 18px; color: red; margin: 10px 0; }
    #result { font-size: 22px; font-weight: bold; margin-top: 20px; }
    #start-screen { margin-top: 50px; }
    input[type="text"] { padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #ccc; width: 60%; text-align: center; }
    button.start-btn { margin-top: 20px; padding: 10px 20px; font-size: 18px; border: none; border-radius: 5px; background: #28a745; color: white; cursor: pointer; }
    button.start-btn:hover { background: #218838; }
    .wrong-answers { text-align: right; margin-top: 20px; }
    .wrong-answers p { background: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>

  <div id="quiz">
    <h1>🧠 اختبار الذكاء</h1>

    <!-- شاشة البداية -->
    <div id="start-screen">
      <p>ادخل اسمك للبدء:</p>
      <input type="text" id="username" placeholder="اسمك">
      <br>
      <button class="start-btn" onclick="startQuiz()">ابدأ الاختبار ✅</button>
    </div>

    <!-- الاختبار -->
    <div id="quiz-screen" style="display:none;">
      <div id="timer">⏱️ 10</div>
      <div id="question-container"></div>
    </div>

    <!-- النتيجة -->
    <div id="result"></div>
    <div class="wrong-answers" id="wrong-answers"></div>
  </div>

  <script>
    // ✅ بنك 50 سؤال (مثال، نفس أسلوب أسئلتك السابقة)
    const questions = [
      { q: "ما عاصمة فرنسا؟", options: ["مدريد","باريس","لندن"], answer: "باريس" },
      { q: "أكمل: 2, 4, 8, 16, ?", options: ["24","32","64"], answer: "32" },
      { q: "ما الحيوان الذي يُلقب بسفينة الصحراء؟", options: ["الجمل","الحصان","الفيل"], answer: "الجمل" },
      { q: "من هو مؤسس شركة مايكروسوفت؟", options: ["بيل غيتس","ستيف جوبز","إيلون ماسك"], answer: "بيل غيتس" },
      { q: "ما هو العنصر الكيميائي Fe؟", options: ["حديد","ذهب","نحاس"], answer: "حديد" },
      { q: "من هو مكتشف قانون الجاذبية؟", options: ["نيوتن","غاليلو","كوبرنيكوس"], answer: "نيوتن" },
      { q: "كم عدد الكواكب في المجموعة الشمسية؟", options: ["7","8","9"], answer: "8" },
      { q: "أكبر محيط في العالم؟", options: ["الأطلسي","الهندي","الهادي"], answer: "الهادي" },
      { q: "ما عاصمة اليابان؟", options: ["أوساكا","طوكيو","كيوتو"], answer: "طوكيو" },
      { q: "من هو أول رئيس للولايات المتحدة؟", options: ["جورج واشنطن","لينكولن","روزفلت"], answer: "جورج واشنطن" },
      { q: "كم عدد حروف اللغة العربية؟", options: ["26","28","30"], answer: "28" },
      { q: "ما هو الكوكب الأحمر؟", options: ["عطارد","المريخ","زحل"], answer: "المريخ" },
      { q: "كم ثانية في 5 دقائق؟", options: ["200","300","400"], answer: "300" },
      { q: "ما عاصمة مصر؟", options: ["القاهرة","طنطا","الإسكندرية"], answer: "القاهرة" },
      { q: "من هو مؤلف كتاب الجمهورية؟", options: ["سقراط","أفلاطون","أرسطو"], answer: "أفلاطون" },
      { q: "ما ضد كلمة (كبير)؟", options: ["طويل","صغير","قوي"], answer: "صغير" },
      { q: "كم ضلع للمربع؟", options: ["3","4","5"], answer: "4" },
      { q: "من هو رسول الإسلام؟", options: ["عيسى","موسى","محمد"], answer: "محمد" },
      { q: "أين يقع برج إيفل؟", options: ["روما","باريس","مدريد"], answer: "باريس" },
      { q: "ما هي عاصمة ألمانيا؟", options: ["برلين","ميونخ","فرانكفورت"], answer: "برلين" },
      // 🔥 أضف بقية الأسئلة لتوصلها 50
    ];

    // ✅ اختيار 10 عشوائيين
    function getRandomQuestions(arr, num) {
      let shuffled = arr.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, num);
    }

    let quizQuestions = [];
    let currentQuestion = 0;
    let score = 0;
    let timer;
    let timeLeft = 10;
    let userName = "";
    let wrongAnswers = [];

    const questionContainer = document.getElementById("question-container");
    const resultContainer = document.getElementById("result");
    const timerContainer = document.getElementById("timer");
    const wrongAnswersContainer = document.getElementById("wrong-answers");

    function startQuiz() {
      const input = document.getElementById("username").value.trim();
      if (!input) {
        alert("⚠️ من فضلك اكتب اسمك للبدء");
        return;
      }
      userName = input;
      document.getElementById("start-screen").style.display = "none";
      document.getElementById("quiz-screen").style.display = "block";

      quizQuestions = getRandomQuestions(questions, 10);
      showQuestion();
    }

    function startTimer() {
      timeLeft = 10;
      timerContainer.innerHTML = "⏱️ " + timeLeft;
      timer = setInterval(() => {
        timeLeft--;
        timerContainer.innerHTML = "⏱️ " + timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          saveWrong();
          currentQuestion++;
          showQuestion();
        }
      }, 1000);
    }

    function showQuestion() {
      clearInterval(timer);
      if (currentQuestion < quizQuestions.length) {
        let q = quizQuestions[currentQuestion];
        let html = `<div class="question">${currentQuestion+1}- ${q.q}</div>`;
        html += `<div class="options">`;
        q.options.forEach(opt => {
          html += `<button onclick="checkAnswer('${opt}')">${opt}</button>`;
        });
        html += `</div>`;
        questionContainer.innerHTML = html;
        startTimer();
      } else {
        endQuiz();
      }
    }

    function checkAnswer(answer) {
      if (answer === quizQuestions[currentQuestion].answer) {
        score++;
      } else {
        saveWrong(answer);
      }
      currentQuestion++;
      showQuestion();
    }

    function saveWrong(answer = null) {
      let q = quizQuestions[currentQuestion];
      wrongAnswers.push({
        question: q.q,
        correct: q.answer,
        chosen: answer
      });
    }

    function endQuiz() {
      questionContainer.innerHTML = "";
      timerContainer.innerHTML = "";
      resultContainer.innerHTML = `✅ ${userName}، انتهى الاختبار<br> نتيجتك: ${score} من ${quizQuestions.length}`;

      if (wrongAnswers.length > 0) {
        let html = "<h3>❌ إجاباتك الخاطئة:</h3>";
        wrongAnswers.forEach(item => {
          if (item.chosen !== item.correct) {
            html += `<p>س: ${item.question}<br>إجابتك: ${item.chosen || "لم تجب"} ❌ <br>الإجابة الصحيحة: ${item.correct} ✅</p>`;
          }
        });
        wrongAnswersContainer.innerHTML = html;
      }
    }
  </script>
</body>
</html>